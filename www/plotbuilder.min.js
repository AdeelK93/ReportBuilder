function titleSet(){$("#Title").on("keyup",function(a){var b=$("#Title").val();""!=b&&"Report Title"!=b||(b="SQL Report Builder"),$("#Navtitle")[0].innerHTML=`<h3>${b}</h3>`,document.title=b})}function radioSet(a,b){$('input[name="'+a+'"][value="'+b+'"]').prop("checked",!0)}function modalBar(){updateEditor(modalQuery().concat("geom_bar(stat='summary',fun.data=mean_se) +\n geom_errorbar(stat='summary',fun.data=mean_se,size=.8,width=.2,color='black') +\n theme(legend.position='none')")),$("#shiny-modal").modal("hide")}function modalBox(){updateEditor(modalQuery().concat("geom_boxplot(color='black') +\n theme(legend.position='none')")),$("#shiny-modal").modal("hide")}function modalLine(){updateEditor(modalQuery().concat("geom_line(aes(group=Battery.ID))")),$("#shiny-modal").modal("hide")}function modalLine2(){updateEditor(modalQuery().concat("geom_line(stat='summary',fun.data=mean_se) +\n geom_ribbon(stat='summary',fun.data=mean_se,alpha=.3,color=NA,show.legend=F)")),$("#shiny-modal").modal("hide")}function modalQuery(){var a="";switch($("ul li.active").index()){case 0:var b=modalID.replace("e","t");if(!document.getElementById(b).value.length){var c=$('input[name="modalq"]:checked').val();document.getElementById(b).value=c,Shiny.onInputChange(b,c)}switch($('input[name="modalq"]:checked').val()){case"Discharge Capacity":a="summarize(DisCap=-min(Amp.Hours)) %>%\n ggplot(aes(Type,DisCap,color=Type,fill=Type)) + ylab('Discharge Capacity (Ah)')";break;case"Reserve Capacity":a="filter(Amp.Hours==min(Amp.Hours)) %>%\n ggplot(aes(Type,Step.time/60,color=Type,fill=Type)) + ylab('Reserve Capacity (min)')";break;case"Ah In During Charge":a="summarize(AhIn=max(Amp.Hours)) %>%\n ggplot(aes(Type,AhIn,color=Type,fill=Type)) + ylab('Ah In During Charge')";break;case"%Ah In During Charge":a="mutate(RF=-Amp.Hours/min(Amp.Hours)) %>% summarize(RFmax=max(RF)) %>%\n ggplot(aes(Type,RFmax*100,color=Type,fill=Type)) + ylab('% Ah In During Charge')";break;case"Time to 100% Recharge Factor":a="mutate(RF=-Amp.Hours/min(Amp.Hours)) %>% summarize(TimeTo100=Step.time[which.min(abs(RF-1))]) %>%\n ggplot(aes(Type,TimeTo100/3600,color=Type,fill=Type)) + ylab('Time to 100% Ah In During Charge (hr)')";break;case"CCA Duration":a="filter(Current<0) %>% summarize(Duration=max(Step.time)) %>%\n ggplot(aes(Type,Duration,color=Type,fill=Type)) + ylab('CCA Duration (s)')";break;case"Voltage After 30s":a="filter(Current<0) %>% summarize(V30s=Voltage[which.min(abs(Step.time-30))]) %>%\n ggplot(aes(Type,V30s,color=Type,fill=Type)) + ylab('Voltage After 30s of Discharge')";break;case"Time to 6V":a="filter(Current<0) %>% summarize(TimeTo6V=Step.time[which.min(abs(Voltage-6))]) %>%\n ggplot(aes(Type,TimeTo6V,color=Type,fill=Type)) + ylab('Discharge Time to 6V (s)')";break;case"Current at 10m":a="filter(Current>0) %>% summarize(Cur10m=Current[which.min(abs((Step.time/60)-10))]) %>%\n ggplot(aes(Type,Cur10m,color=Type,fill=Type)) + ylab('Current at 10m')";break;case"Ah In at 10m":a="filter(Current>0) %>% summarize(Ah10m=Amp.Hours[which.min(abs((Step.time/60)-10))]) %>%\n ggplot(aes(Type,Ah10m,color=Type,fill=Type)) + ylab('Ah In at 10m')";break;case"Minimum Discharge Voltage":a="summarize(MinVolt=min(Voltage)) %>%\n ggplot(aes(Cycle,MinVolt,color=Type,fill=Type)) + ylab('Minimum Discharge Voltage')";break;case"BOC Voltage":a="filter(Step.time==min(Step.time)) %>%\n ggplot(aes(Cycle,Voltage,color=Type,fill=Type)) + ylab('Beginning of Charge Voltage')";break;case"EOC Voltage":a="filter(Step.time==max(Step.time)) %>%\n ggplot(aes(Cycle,Voltage,color=Type,fill=Type)) + ylab('End of Charge Voltage')";break;case"BOC Current":a="filter(Step.time==min(Step.time)) %>%\n ggplot(aes(Cycle,Current,color=Type,fill=Type)) + ylab('Beginning of Charge Current')";break;case"EOC Current":a="filter(Step.time==min(Step.time)) %>%\n ggplot(aes(Cycle,Current,color=Type,fill=Type)) + ylab('End of Charge Current')";break;default:console.error("Could not find query selector")}break;case 1:a=`ggplot(aes(${document.getElementById("modalcx").value},${document.getElementById("modalcy").value},color=Type,fill=Type))`;break;case 2:var d=document.getElementById("modaldx").value,e=document.getElementById("modaldv").value,f=document.getElementById("modaldy").value;a=isNaN(parseInt(e))?d==f?`summarize(Variable=${e}(${d})) %>%
 ggplot(aes(Type,Variable,color=Type,fill=Type))`:`filter(${d}==${e}(${d})) %>%
 ggplot(aes(Type,${f},color=Type,fill=Type))`:`summarize(Variable=${f}[which.min(abs(${d}-${e}))]) %>%
 ggplot(aes(Type,Variable,color=Type,fill=Type))`;break;default:console.error("Could not find tab index")}return"x %>% group_by(Battery.ID,Type,Cycle) %>%\n ".concat(modalFilter(),a," +\n ")}function modalFilter(){var a=$('input[id="filter.voltage"]')[0].value.split(";"),b=$('input[id="filter.voltage"]')[0].dataset,c=$('input[id="filter.current"]')[0].value.split(";"),d=$('input[id="filter.current"]')[0].dataset,e=$('input[id="filter.amphours"]')[0].value.split(";"),f=$('input[id="filter.amphours"]')[0].dataset,g=$('input[id="filter.totaltime"]')[0].value.split(";"),h=$('input[id="filter.totaltime"]')[0].dataset,i=$('input[id="filter.steptime"]')[0].value.split(";"),j=$('input[id="filter.steptime"]')[0].dataset,k=$('input[id="filter.step"]')[0].value,l="";return a[0]!=b.min&&(l=`${l}Voltage>=${a[0]},`),a[1]!=b.max&&(l=`${l}Voltage<=${a[1]},`),c[0]!=d.min&&(l=`${l}Current>=${c[0]},`),c[1]!=d.max&&(l=`${l}Current<=${c[1]},`),e[0]!=f.min&&(l=`${l}Amp.Hours>=${e[0]},`),e[1]!=f.max&&(l=`${l}Amp.Hours<=${e[1]},`),g[0]!=h.min&&(l=`${l}Total.Time>=${g[0]},`),g[1]!=h.max&&(l=`${l}Total.Time<=${g[1]},`),i[0]!=j.min&&(l=`${l}Step.time>=${i[0]},`),i[1]!=j.max&&(l=`${l}Step.time<=${i[1]},`),0!=k&&(l=`${l}Step==${k},`),l.length&&(l=l.substring(0,l.length-1),l=`filter(${l}) %>%
 `),l}$(document).ready(function(){var a=$("#Title").val();""!=a&&"Report Title"!=a||(a="SQL Report Builder"),$("#Navtitle")[0].innerHTML=`<h3>${a}</h3>`,document.title=a,titleSet()});